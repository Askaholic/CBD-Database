# CBD-Database

A WordPress plugin for managing the Contra Borealis Dancer's user database.

### Pages and Snippets
*Please refer to the `controllers` directory of this project for available pages*

You can tell the plugin to render any of it's builtin pages or snippets by adding
the `dp_page` directive to the content of a post. For example:

```html
dp_page reset_password

<p> This is some custom content! </p>
```

The plugin will replace the `dp_page` directive with the content of the built in
page that was referenced.

Most pages are intended to have their own dedicated post with no other content
on the post. However there is nothing stopping you from adding multiple `dp_page`
directives to a single post.

Snippets on the other hand are smaller pieces of code that are meant to help
integrate special functionality of the plugin with the existing site content.
Internally they are treated exactly the same way as pages.

```html
<h1> Useful links: </h1>

<a href="#">Blah</a>
dp_page snippet_profile <!-- Optional link generated by plugin -->
<a href="#">BlahBlah</a>
```

#### Snippet quick reference (might not be exhaustive)
  * `snippet_login` - Adds the login or logout link
  * `snippet_profile` - Adds a link to your profile if you are logged in

### Module Usage

Event viewing
- goto event url and enter variable for scheduled event id as in database
- eg. http://localhost/index.php/events/?event=1
- events must be enabled or you must be admin to view
- can schedule events through review_events page
- to view unscheduled events as admin set unscheduled variable
- eg. http://localhost/index.php/events/?event=1&unscheduled=true
Notes:
- be sure to restart plugin for event route
- need to reenter db info in plugin options page to create new dbs

Invoice viewing
-basically like Events
- can get array of users invoices like: `$user_invoices = UserInvoices::query_invoices( $user->id );`
- or singular like `$user_invoice = UserInvoices::query_invoices( $user->id, $inv_id  )[0];`
- users can view their own invoices
- eg. http://localhost/index.php/invoices/?invoice=1
- admins can view other users invoices
- eg. http://localhost/index.php/invoices/?invoice=1&user=1
